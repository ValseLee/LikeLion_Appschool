### POP
---

0. 프로토콜 지향 프로그래밍
- WWDC 세션 주제로 2015년에 소개되었다.
    + 디버거를 믿지 않고 IDE도 쓰지 않는 구식 프로그래머 Crusty.
    + 1970년대 등장한 객체지향도 하지 않고 있었기에 객체지향의 장점도 클래스와 함께 소개했다.
- 그래서 클래스의 장점은?
    + 캡슐화로 우리 코드를 보호할 수 있다.
    + 메소드로 의사소통 채널을 그 내부에 만들 수 있다.
    + 소프트웨어 규모가 커져도 **네임스페이스**로 코드 사이 충돌 방지 가능하다.
        * 클래스 이름을 하나의 앱 내에서 각 구역을 나눠서 동일한 클래스 이름을 다시 쓸 수 있게 함
    + 표현 구문이 좋다(Expressive Syntax).
    + 서브클래스, 연산프로퍼티도 만들 수 있다!
- Crusty 아저씨는 모두 지워버리더니 구조체와 열거형으로 다 할 수 있다고 장담했다.
    + 참조 타입 없이 값 타입만으로 할 수 있다는 게 핵심 같다.
    + **클래스의 강력함은 인정하지만 대가 역시 크다**.
    
**[아저씨의 불만 3가지]**
1. Implicit Sharing(암묵적 공유)
- B = A 를 실행할 때, 클래스는 A의 변화를 B가 공유하게 된다.
- A의 원래 데이터를 '아무거' 로 바꾸면 B도 어쩔 수 없이 변하게 된다.
- B의 데이터를 들춰보기 전엔 모르지. 그래서 아저씨는 모든 버그를 박멸하기 위해서는 참조가 아닌 복사가 이뤄져야 한다고 봤다.
    + 물론 너무 많은 사본은 작동을 느리게 한다.
2. Class inheritance is too intrusive(상속은 개발자에게 너무 많은 부담을 남긴다)
- 하나의 부모, 하나의 자식 클래스만 갖는다.
- 그 저장 속성을 모두 받아들여야 할 것이며, 초기화의 부담도 상속 계층에 따라 커진다.
3. Lost Type Relationships(상속 클래스 추상화의 이면)
- 부모 클래스에 속성이 없거나 속성명이 달라지는 경우, 이를 상속한 자식 클래스가 부모 클래스의 속성을 가정하고 메소드를 재정의한다면 무슨 일이 벌어질까.
- 부모 클래스의 속성이 자식 클래스의 메소드에서 맥락을 잃게 되고, 메소드의 실행을 위해 부모 클래스를 다운캐스팅 해야 한다.
- 이러면 부모 클래스를 왜 굳이 상속해야 하며, 이 두 객체가 맺는 관계가 무용지물이 되어 버린다.

-> 결론은 클래스가 아니라 프로토콜로 코딩을 시작하라는 교훈이었다.

---
### 프로토콜 지향 프로그래밍
```swift
protocol Talkable {
    var topic: STring { get set }
    func talk(to: Self)
}

struct Person: Talkable {
    var topic: String // 요구사항
    var name: String

    func talk(to: Person) { // 요구사항
        print("\(topic)에 대해 \(to.name)에게 이야기 ")
    }
}

struct Monkey: Talkable {
    var topic: String

    func talk(to: Monkey) {
        print("우끼끼, 까악,까 \(topic)")
    }
}
```
- 프로토콜의 요구 사항을 모두 한 번에 미리 구현해두면 중복을 최소화할 수 있다.
    + 프로토콜을 확장하면 기본 구현을 정의할 수 있다.
    + 기본 구현을 다른 동작으로 재정의하고 싶으면 `override` 키워드 없이 그냥 구현하면 된다.
    + 그래서 프로토콜을 잘 구성한다면 `struct`를 선언했는데도 그 내부에 아무것도 쓰지 않을 수 있는 경지에 이를 수 있다...!
---

### OOP vs POP
- OOP :
    + 클래스의 상속으로 계층화하고 `override`를 적극 활용한다. 하나의 객체는 단일 상속만 가능하다.
    + 참조 타입이며 메모리를 공유하기 때문에 그만큼 적게 메모리를 점유한다.
    + 대신 의도치 않은 갱신을 막기 위해 lock 기능을 요구한다(교착상태 주의).
    + 멀티 스레드와 프로세스에서 Thread-Safe 관련 약점을 보일 수 있다.
- POP :
    + struct, enum을 주로 사용하며 `protocol`로 동일 속성, 메소드를 부여한다.
    + `extension`으로 기본 구현을 정의하며 하나의 객체는 여러 `protocol`을 가질 수 있다.
    + 값 타입으로 복제되기 때문에 메모리 점유가 비교적 큰 편이지만 지연 복제로 극복할 수 있다.
        * 지연 복제 자체는 애플이 해준다고 한다..! 그런데 확실하지 않다.
    + 멀티 스레드와 프로세스에서 강점을 보인다.
---

### 스위프트의 강한 타입과 프로토콜 지향 프로그래밍
위의 두 경향을 비교하고 있지만 어느 것이 정답은 아니다.
값 타입 기반의 프로그래밍과 함수 언어의 개념과 또한 별개이다.
클로저는 열심히 함수형 언어의 특성을 보여주고 있으니..
값 타입, 참조 타입을 제대로 이해해서 적재적소에 활용하는 것이 더 좋은 개발자가 될 수 있도록 도와줄 것이다.